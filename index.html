<canvas id='canvas' width="700" height= "700" />
<script type='text/javascript'>
  var canvas = document.getElementById('canvas');
  var c = canvas.getContext('2d');

  var allPieces = [];

  for (var i = 0; i < 16; i++) {
    var num = ("000000000" + i.toString(2)).substr(-4);

    allPieces.push({
      white: parseInt(num.charAt(0)),
      cross: parseInt(num.charAt(1)),
      tall: parseInt(num.charAt(2)),
      circle: parseInt(num.charAt(3)),
      num: i
    });
  }

  function circle(c, startX, startY, width, height) {
    width = width / 2;
    height = height / 2;
    c.beginPath();
    c.arc(startX + width, startY + height, width, height, 0, 2 * Math.PI);
    c.fill();
    c.stroke();
  }

  c.strokeStyle = 'black';
  c.lineWidth = 4;

  allPieces.forEach(function (piece) {
    c.fillStyle = piece.white ? 'white' : 'black';

    c.strokeStyle = piece.tall ? 'green' : 'red';

    if (piece.circle) {
      circle(c, 20 + 40 * piece.num, 20, 20, 20);
    } else {
      c.fillRect(20 + 40 * piece.num, 20, 20, 20);
      c.strokeRect(20 + 40 * piece.num, 20, 20, 20);
    }

    if (piece.cross) {
      c.strokeStyle = piece.white ? 'black' : 'white';
      c.beginPath();
      c.moveTo(20 + 40 * piece.num, 20);
      c.lineTo(40 + 40 * piece.num, 40);
      c.moveTo(40 + 40 * piece.num, 20);
      c.lineTo(20 + 40 * piece.num, 40);
      c.stroke();
    }
  });

  var turn = 0;

  var pieceSelected = null;

  function playTurn(e){
    if(pieceSelected == null) {
      console.log('select piece');
      allPieces.forEach((piece) => {
        if( e.x > 20 + 40 * piece.num && e.x < 20 + 40 * piece.num + 20 && e.y > 20, e.y < 40) {
          console.log('in piece '+piece.num);
        }
      });
    } else {
      console.log('place piece');
    }
  }

  canvas.addEventListener('click', playTurn, false);

</script>
